// Translation objects
const translations = {
    bn: {
        // Site title and navigation
        "site-title": "গ্রাম মেম্বার",
        "site-subtitle": "কুটুম্বপুর ২ নং ওয়ার্ড",
        "nav-home": "হোম",
        "nav-developer": "ডেভেলপার",
        
        // Developer page
        "developer-title": "ওয়েবসাইট ডেভেলপার",
        "developer-subtitle": "এই ওয়েবসাইটটি তৈরি করেছেন",
        "dev-name": "মোঃ সাজ্জাদ হোসেন",
        "dev-title": "ওয়েব ডেভেলপার ও ডিজাইনার",
        "dev-bio": "আমি একজন প্যাশনেট ওয়েব ডেভেলপার। মডার্ন ওয়েব টেকনোলজি ব্যবহার করে ইউজার-ফ্রেন্ডলি ওয়েবসাইট ও অ্যাপ্লিকেশন তৈরি করতে পছন্দ করি। এই গ্রাম মেম্বার ওয়েবসাইটটি তৈরি করতে আমি HTML5, CSS3, JavaScript এবং রেসপন্সিভ ডিজাইন টেকনিক ব্যবহার করেছি।",
        "dev-email-title": "ইমেইল",
        "dev-email": "87sazzadhossain87@gmail.com",
        "dev-phone-title": "মোবাইল নম্বর",
        "dev-phone": "০১৯১৬৪৭৫৯৮৯",
        "dev-location-title": "ঠিকানা",
        "dev-location": "কুমিল্লা, বাংলাদেশ",
        
        // Social Links
        "facebook-text": "ফেসবুক",
        "instagram-text": "ইনস্টাগ্রাম",
        "whatsapp-text": "হোয়াটসঅ্যাপ",
        
        // Skills
        "skills-title": "দক্ষতা",
        "skills-subtitle": "আমার টেকনিক্যাল দক্ষতা",
        "skill1-name": "HTML5",
        "skill1-desc": "সিম্যান্টিক HTML5 মার্কআপ, এক্সেসিবিলিটি এবং SEO অপ্টিমাইজেশন",
        "skill2-name": "CSS3",
        "skill2-desc": "মডার্ন CSS, Flexbox, Grid, অ্যানিমেশন এবং রেসপন্সিভ ডিজাইন",
        "skill3-name": "JavaScript",
        "skill3-desc": "ES6+, DOM ম্যানিপুলেশন, AJAX এবং মডার্ন জাভাস্ক্রিপ্ট ফ্রেমওয়ার্ক",
        "skill4-name": "রেসপন্সিভ ডিজাইন",
        "skill4-desc": "মোবাইল-ফার্স্ট ডিজাইন, সকল ডিভাইসে পারফেক্ট ভিউ",
        
        // Projects
        "projects-title": "অন্যান্য প্রকল্প",
        "projects-subtitle": "আমার তৈরি কিছু নোটেবল প্রকল্প",
        "project1-dev-title": "গ্রাম মেম্বার ওয়েবসাইট",
        "project1-dev-desc": "এই সম্পূর্ণ রেসপন্সিভ গ্রাম মেম্বার ওয়েবসাইট, ডার্ক/লাইট থিম এবং বাংলা-ইংলিশ ভাষা সমর্থন করে।",
        "project2-dev-title": "ই-কমার্স ওয়েবসাইট",
        "project2-dev-desc": "একটি সম্পূর্ণ ই-কমার্স সলিউশন যাতে পেমেন্ট গেটওয়ে এবং ইউজার অ্যাকাউন্ট সিস্টেম রয়েছে।",
        "project3-dev-title": "হাসপাতাল ম্যানেজমেন্ট",
        "project3-dev-desc": "হাসপাতালের সকল অপারেশন যেমন অ্যাপয়েন্টমেন্ট, বিলিং এবং ইনভেন্টরি ম্যানেজমেন্ট সিস্টেম।",
        
        // Website technology
        "website-tech-title": "এই ওয়েবসাইটের টেকনোলজি",
        "website-tech-desc": "এই গ্রাম মেম্বার ওয়েবসাইটটি তৈরি করতে নিম্নলিখিত টেকনোলজি ব্যবহার করা হয়েছে:",
        "tech1": "HTML5 (সিম্যান্টিক মার্কআপ)",
        "tech2": "CSS3 (কাস্টম প্রপার্টিজ, ফ্লেক্সবক্স, গ্রিড)",
        "tech3": "ভ্যানিলা JavaScript (ES6+)",
        "tech4": "রেসপন্সিভ ডিজাইন (মোবাইল ফার্স্ট)",
        "tech5": "ফন্ট অ্যাওয়েসাম আইকন",
        "tech6": "Google Fonts (হিন্দ সিলিগুড়ি ও পপিন্স)",
        "tech7": "লোকাল স্টোরেজ (থিম ও ল্যাঙ্গুয়েজ সেভ)",
        "tech8": "কাস্টম ডিজাইন সিস্টেম",
        "website-note": "নোট: এই ওয়েবসাইটটি সম্পূর্ণ স্ট্যাটিক এবং কোনো ব্যাকএন্ড সার্ভারের প্রয়োজন নেই। এটি একটি সিঙ্গেল HTML ফাইল হিসেবে রান করতে পারে এবং সম্পূর্ণ অফলাইনে কাজ করবে।",
        
        // Contact Button
        "contact-btn": "WhatsApp এ যোগাযোগ করুন",
        
        // Footer
        "footer-title": "গ্রাম মেম্বার",
        "footer-subtitle": "কুটুম্বপুর ২ নং ওয়ার্ড",
        "footer-description": "আমি মোঃ সালাইমান, কুটুম্বপুর ২ নং ওয়ার্ডের গ্রাম মেম্বার। এলাকার উন্নয়ন ও জনসেবায় আমি সদা সচেষ্ট। আমার সাথে সরাসরি যোগাযোগ করে যেকোনো সমস্যার সমাধান ও প্রয়োজনীয় সেবা পেতে পারেন।",
        "quick-links-footer": "দ্রুত লিংক",
        "contact-footer": "যোগাযোগ",
        "footer-phone": "০১৯১৬৪৭৫৯৮৯",
        "footer-email": "87sazzadhossain87@gmail.com",
        "footer-address": "কুমিল্লা, বাংলাদেশ",
        "copyright-text": "© ২০২৪ কুটুম্বপুর ২ নং ওয়ার্ড গ্রাম মেম্বার কার্যালয়। সর্বস্বত্ব সংরক্ষিত।",
        "developer-credit": "ওয়েবসাইট ডিজাইন ও ডেভেলপমেন্ট: মোঃ সাজ্জাদ হোসেন"
    },
    en: {
        // Site title and navigation
        "site-title": "Village Council Member",
        "site-subtitle": "Kutumbpur Ward No. 2",
        "nav-home": "Home",
        "nav-developer": "Developer",
        
        // Developer page
        "developer-title": "Website Developer",
        "developer-subtitle": "This website is developed by",
        "dev-name": "Md. Sazzad Hossain",
        "dev-title": "Web Developer & Designer",
        "dev-bio": "I am a passionate web developer. I love creating user-friendly websites and applications using modern web technologies. To build this Village Council Member website, I used HTML5, CSS3, JavaScript and responsive design techniques.",
        "dev-email-title": "Email",
        "dev-email": "87sazzadhossain87@gmail.com",
        "dev-phone-title": "Mobile Number",
        "dev-phone": "01916475989",
        "dev-location-title": "Location",
        "dev-location": "Comilla, Bangladesh",
        
        // Social Links
        "facebook-text": "Facebook",
        "instagram-text": "Instagram",
        "whatsapp-text": "WhatsApp",
        
        // Skills
        "skills-title": "Skills",
        "skills-subtitle": "My technical skills",
        "skill1-name": "HTML5",
        "skill1-desc": "Semantic HTML5 markup, accessibility and SEO optimization",
        "skill2-name": "CSS3",
        "skill2-desc": "Modern CSS, Flexbox, Grid, animations and responsive design",
        "skill3-name": "JavaScript",
        "skill3-desc": "ES6+, DOM manipulation, AJAX and modern JavaScript frameworks",
        "skill4-name": "Responsive Design",
        "skill4-desc": "Mobile-first design, perfect view on all devices",
        
        // Projects
        "projects-title": "Other Projects",
        "projects-subtitle": "Some notable projects I have created",
        "project1-dev-title": "Village Council Member Website",
        "project1-dev-desc": "This fully responsive village council member website supports dark/light theme and Bangla-English language.",
        "project2-dev-title": "E-commerce Website",
        "project2-dev-desc": "A complete e-commerce solution with payment gateway and user account system.",
        "project3-dev-title": "Hospital Management",
        "project3-dev-desc": "Hospital management system for all operations like appointment, billing and inventory management.",
        
        // Website technology
        "website-tech-title": "Technology Used in This Website",
        "website-tech-desc": "The following technologies were used to build this Village Council Member website:",
        "tech1": "HTML5 (Semantic markup)",
        "tech2": "CSS3 (Custom properties, Flexbox, Grid)",
        "tech3": "Vanilla JavaScript (ES6+)",
        "tech4": "Responsive Design (Mobile first)",
        "tech5": "Font Awesome icons",
        "tech6": "Google Fonts (Hind Siliguri & Poppins)",
        "tech7": "Local Storage (Theme & language save)",
        "tech8": "Custom design system",
        "website-note": "Note: This website is completely static and does not require any backend server. It can run as a single HTML file and will work completely offline.",
        
        // Contact Button
        "contact-btn": "Contact on WhatsApp",
        
        // Footer
        "footer-title": "Village Council Member",
        "footer-subtitle": "Kutumbpur Ward No. 2",
        "footer-description": "I am Md. Sulaiman, the Village Council Member of Kutumbpur Ward No. 2. I am always active in area development and public service. Contact me directly for solution to any problem and necessary services.",
        "quick-links-footer": "Quick Links",
        "contact-footer": "Contact",
        "footer-phone": "01916475989",
        "footer-email": "87sazzadhossain87@gmail.com",
        "footer-address": "Comilla, Bangladesh",
        "copyright-text": "© 2024 Kutumbpur Ward No. 2 Village Council Member Office. All rights reserved.",
        "developer-credit": "Website Design & Development: Md. Sazzad Hossain"
    }
};

// Current language and theme state
let currentLang = 'bn';
let currentTheme = 'light';

// DOM Elements
const body = document.body;
const themeToggle = document.getElementById('theme-toggle');
const langFlags = document.querySelectorAll('.language-flag');
const navLinks = document.querySelectorAll('.nav-link');
const footerNavLinks = document.querySelectorAll('.footer-nav-link');
const sections = document.querySelectorAll('.section');
const mobileMenuBtn = document.getElementById('mobile-menu-btn');
const navMenu = document.getElementById('nav-links');

// Initialize the website
function init() {
    // Set initial theme
    const savedTheme = localStorage.getItem('theme') || 'light';
    setTheme(savedTheme);
    
    // Set initial language
    const savedLang = localStorage.getItem('language') || 'bn';
    setLanguage(savedLang);
    
    // Set active section
    setActiveSection('developer');
    
    // Set up event listeners
    setupEventListeners();
    
    // Check if developer photo exists
    checkDeveloperPhoto();
}

// Check if developer photo exists, otherwise show default icon
function checkDeveloperPhoto() {
    const devPhoto = document.getElementById('dev-photo');
    if (devPhoto) {
        // Check if image loads successfully
        devPhoto.onerror = function() {
            // If image fails to load, replace with icon
            const developerImg = document.querySelector('.developer-img');
            developerImg.innerHTML = `
                <div class="developer-photo" style="display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-user-tie" style="font-size: 100px; color: var(--primary-light);"></i>
                </div>
            `;
        };
    }
}

// Set up event listeners
function setupEventListeners() {
    // Theme toggle
    if (themeToggle) {
        themeToggle.addEventListener('click', toggleTheme);
    }
    
    // Language toggle
    langFlags.forEach(flag => {
        flag.addEventListener('click', () => {
            const lang = flag.getAttribute('data-lang');
            setLanguage(lang);
        });
    });
    
    // Navigation links
    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const href = link.getAttribute('href');
            if (href.includes('index.html')) {
                // Redirect to home page
                window.location.href = href;
            } else {
                const section = href.substring(1);
                setActiveSection(section);
            }
            // Close mobile menu if open
            if (navMenu && navMenu.classList.contains('active')) {
                navMenu.classList.remove('active');
            }
        });
    });
    
    // Footer navigation links
    footerNavLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const href = link.getAttribute('href');
            if (href.includes('index.html')) {
                // Redirect to home page
                window.location.href = href;
            } else {
                const section = href.substring(1);
                setActiveSection(section);
            }
        });
    });
    
    // Mobile menu toggle
    if (mobileMenuBtn) {
        mobileMenuBtn.addEventListener('click', () => {
            if (navMenu) {
                navMenu.classList.toggle('active');
            }
        });
    }
    
    // Close mobile menu when clicking outside
    document.addEventListener('click', (e) => {
        if (navMenu && !e.target.closest('nav') && navMenu.classList.contains('active')) {
            navMenu.classList.remove('active');
        }
    });
    
    // Update URL hash when section changes
    window.addEventListener('hashchange', () => {
        const hash = window.location.hash.substring(1) || 'developer';
        setActiveSection(hash);
    });
}

// Toggle theme between light and dark
function toggleTheme() {
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
    setTheme(newTheme);
}

// Set theme
function setTheme(theme) {
    currentTheme = theme;
    
    if (theme === 'dark') {
        body.classList.add('dark-mode');
        if (themeToggle) {
            themeToggle.classList.add('active');
        }
    } else {
        body.classList.remove('dark-mode');
        if (themeToggle) {
            themeToggle.classList.remove('active');
        }
    }
    
    // Save to localStorage
    localStorage.setItem('theme', theme);
}

// Set language
function setLanguage(lang) {
    currentLang = lang;
    
    // Update active language flag
    langFlags.forEach(flag => {
        if (flag.getAttribute('data-lang') === lang) {
            flag.classList.add('active');
        } else {
            flag.classList.remove('active');
        }
    });
    
    // Update all translatable elements
    updateContent(lang);
    
    // Save to localStorage
    localStorage.setItem('language', lang);
}

// Update all content based on language
function updateContent(lang) {
    const translation = translations[lang];
    
    // Update all elements with id
    document.querySelectorAll('[id]').forEach(element => {
        const key = element.id;
        if (translation[key]) {
            // Handle HTML content
            if (translation[key].includes('<br>')) {
                element.innerHTML = translation[key];
            } else {
                element.textContent = translation[key];
            }
        }
    });
    
    // Update navigation links
    navLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href === '#developer') {
            const key = 'nav-developer';
            if (translation[key]) {
                link.textContent = translation[key];
            }
        } else if (href === 'index.html') {
            const key = 'nav-home';
            if (translation[key]) {
                link.textContent = translation[key];
            }
        }
    });
}

// Set active section
function setActiveSection(sectionId) {
    // Update URL hash
    window.location.hash = sectionId;
    
    // Update active section
    sections.forEach(section => {
        if (section.id === sectionId) {
            section.classList.add('active');
        } else {
            section.classList.remove('active');
        }
    });
    
    // Update active navigation link
    navLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href === `#${sectionId}`) {
            link.classList.add('active');
        } else {
            link.classList.remove('active');
        }
    });
    
    // Scroll to top of section
    const sectionElement = document.getElementById(sectionId);
    if (sectionElement) {
        sectionElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
}

// Initialize the website when DOM is loaded
document.addEventListener('DOMContentLoaded', init);